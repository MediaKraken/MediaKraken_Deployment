{% extends "layout.html" %}
{% block content %}
<body id="data_background">
<head>
    <meta charset="UTF-8"/>
    <link rel="stylesheet"
          href="{{ url_for('static', filename='bootstrap/css/bootstrap.min.css') }}">
    <link rel="stylesheet"
          href="{{ url_for('static', filename='font-awesome/css/font-awesome.min.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/star-rating.min.css') }}"
          media="all" type="text/css"/>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/base_webapp_layout.css') }}"
          media="all" type="text/css"/>
    <link rel="stylesheet" href="{{ url_for('static', filename='bstree/css/bstree.min.css') }}">
</head>
{% if data %}
<div id="movie_detail">
    {% if data_background_image is none %}
    <img alt="fs_bg_image"
         src="{{ url_for('static', filename='images/movie_ticket.png') }}"
         id="fs_bg_image">
    {% else %}
    <img alt="fs_bg_image"
         src="{{ url_for('static', filename='meta/images/' + data_background_image | replace('/mediakraken/web_app/MediaKraken/static/meta/images/', '')) }}"
         id="fs_bg_image">
    {% endif %}
    <form name="video_play_stat_form" method="post">
        <div class="row">
            <div class="col-sm-2">
                <div id="movie_image_div" class="table-responsive">
                    {% if data_poster_image is none %}
                    <img class="center"
                         src="{{ url_for('static', filename='images/Movie-icon.png') }}">
                    {% else %}
                    <img class="center"
                         src="{{ url_for('static', filename='meta/images/' + data_poster_image | replace('/mediakraken/web_app/MediaKraken/static/meta/images/', '')) }}">
                    {% endif %}
                </div>
            </div>
            <div class="col-sm">
                <div class="row">
                    <div id="mytree" class="bstree">
                        <ul>

                            <li data-id="root" data-level="0"><span>Racine</span>
                                <ul>
                                    <li data-id="ACL" data-level="1"><span>Alsace - Champagne-Ardenne - Lorraine</span>
                                        <ul>
                                            <li data-id="ALS" data-level="2"><span>Alsace</span>
                                                <ul>
                                                    <li data-id="ALS01" data-level="3">
                                                        <span>Colmar</span></li>
                                                    <li data-id="ALS02" data-level="3"><span>Mulhouse</span>
                                                    </li>
                                                    <li data-id="ALS03" data-level="3"><span>Darmstadt</span>
                                                    </li>
                                                </ul>
                                            </li>
                                            <li data-id="CHA" data-level="2">
                                                <span>Champagne-Ardenne</span>
                                                <ul>
                                                    <li data-id="CHA01" data-level="3"><span>Bazeilles</span>
                                                    </li>
                                                    <li data-id="CHA02" data-level="3"><span>Châlons-en-Champagne</span>
                                                    </li>
                                                    <li data-id="CHA03" data-level="3"><span>Charleville-Mézières</span>
                                                    </li>
                                                    <li data-id="CHA04" data-level="3">
                                                        <span>Reims</span></li>
                                                    <li data-id="CHA05" data-level="3"><span>Saint-Dizier</span>
                                                    </li>
                                                    <li data-id="CHA06" data-level="3">
                                                        <span>Troyes</span></li>
                                                </ul>
                                            </li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>

                        </ul>
                    </div>

                    <div class="table-responsive">
                        <table class="table table-striped table-hover">
                            <thead>
                            <tr>
                                <th>User</th>
                                <th>Media</th>
                                <th>Time</th>
                                <th>Stop</th>
                            </tr>
                            </thead>
                            <tbody>
                            {% for row_data in server_streams %}
                            <tr>
                                <td>{{ row_data[0] }}</td>
                                <td>{{ row_data[1] }}</td>
                                <td>{{ row_data[2] }}</td>
                                <div class="pull-right action-buttons">
                                    <td>
                                        <p data-placement="top" data-toggle="tooltip"
                                           title="Delete">
                                            <button class="btn btn-danger btn-xs"
                                            <a data-id={{ row_data[4] }}
                                               onclick="ConfirmLibraryDelete(this)"><span
                                                    class="glyphicon glyphicon-trash"></span></a>
                                    </td>
                                </div>
                            </tr>
                            {% endfor %}
                            </tbody>
                        </table>
                    </div>

                </div>
                <div class="row">
                    <div id="movie_detail_div" class="table-responsive">
                        <div id="textbox">
                            <p class="alignleft">Title: {{data}}</p>
                            <p class="alignright">Release Date:
                                {{json_metadata['Meta']['themoviedb']['Meta']['release_date']}}</p>
                        </div>
                        <div style="clear: both;"></div>
                        <div id="tag_title">
                            {% if json_metadata['Meta']['themoviedb']['Meta']['tagline'] and
                            json_metadata['Meta']['themoviedb']['Meta']['tagline'] != '-' %}
                            <p>{{json_metadata['Meta']['themoviedb']['Meta']['tagline']}}</p>
                            {% endif %}
                            {% if json_metadata['Meta']['themoviedb']['Meta']['original_title'] and
                            json_metadata['Meta']['themoviedb']['Meta']['original_title'] != data %}
                            <p>Alternate Title:
                                {{json_metadata['Meta']['themoviedb']['Meta']['original_title']}}</p>
                            {% endif %}
                        </div>
                        <div style="clear: both;"></div>
                        <!-- #TODO add rating icon here-->
                        <div id="textbox_gen">
                            {% if data_genres %}
                            <p class="alignleft">Genres: {{data_genres}}</p>
                            {% endif %}
                            <p class="alignright">
                                {% if data_watched_status == True %}
                                <input class="btn btn-default btn-submit" type="submit"
                                       name="status"
                                       value="Watched">
                                {% else %}
                                <input class="btn btn-default btn-submit" type="submit"
                                       name="status"
                                       value="Unwatched">
                                {% endif %}
                                {% if data_sync_status == False %}
                                <input class="btn btn-default btn-submit" type="submit"
                                       name="status"
                                       value="Sync">
                                {% endif %}
                                {% if data_cast == True %}
                                <a href="{{ url_for('user_chromecast.user_cast', action='base', guid=data_guid) }}">
                                    <img class="b-lazy"
                                         src=data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==
                                         data-src="{{ url_for('static', filename='images/chromecast.png') }}">
                                </a>
                                {% endif %}
                            </p>
                        </div>
                        <div style="clear: both;"></div>
                        <div id="textbox">
                            <p class="alignleft">User Rating Avg:
                                {{json_metadata['Meta']['themoviedb']['Meta']['vote_average']}} with
                                {{data_vote_count}} vote(s)</p>
                            <p class="alignright"><input id="movie_rating_stars"
                                                         value={{json_metadata['Meta']['themoviedb']['Meta']['vote_average']}}
                                                         type="number" class="rating" min=0 max=10
                                                         step=0.1
                                                         data-size="xx" data-stars="10"></p>
                        </div>
                        <div style="clear: both;"></div>
                        <div class="container">
                            <div class="row">
                                <div class="col-md-3">
                                    <p>Version(s):</p>
                                    <p>
                                        <select name="Video_Track" , id="video_track">
                                            {% for video_data in data_vid_versions %}
                                            <option value={{video_data[1]}}>{{video_data[0]}}
                                            </option>
                                            {% endfor %}
                                        </select>
                                    </p>
                                    <p><input class="btn btn-default btn-submit" type="submit"
                                              name="status"
                                              value="WebPlay"></p>
                                </div>
                                <div class="col-md-3">
                                    <p>Audio track(s):</p>
                                    <p>
                                        <select name="Video_Play_Audio_Track" ,
                                                id="video_play_audio_track">
                                            {% for audio_data in data_audio_track %}
                                            <option value={{audio_data[0]}}>{{audio_data[1]}}
                                            </option>
                                            {% endfor %}
                                        </select>
                                    </p>
                                    <p>
                                        Subtitle(s):
                                        <select name="Video_Play_Subtitles" ,
                                                id="video_play_subtitles">
                                            {% for sub_data in data_sub_track %}
                                            <option value={{sub_data[0]}}>{{sub_data[1]}}</option>
                                            {% endfor %}
                                        </select>
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div style="clear: both;"></div>
                        {% if data_budget != "0" %}
                        <p>Budget: {{data_budget}}</p>
                        {% endif %}
                        {% if data_revenue != "0" %}
                        <p>Revenue: {{data_revenue}}</p>
                        {% endif %}
                        {% if json_metadata['Meta']['themoviedb']['Meta']['homepage'] %}
                        <p>Homepage: <a
                                href={{json_metadata['Meta']['themoviedb']['Meta']['homepage']}}>{{json_metadata['Meta']['themoviedb']['Meta']['homepage']}}</a>
                        </p>
                        {% endif %}
                        {% if data_production %}
                        <p>Production Companies: {{data_production}}</p>
                        {% endif %}
                        {% if data_review %}
                        <p>Reviews:
                            <button data-toggle="collapse" data-target="#review_collapse">Toggle
                            </button>
                        </p>
                        <div id="review_collapse" class="collapse">
                            {% for review_info in data_review %}
                            <p>{{ review_info[0] + ": " + review_info[2] }}</p>
                            {% endfor %}
                        </div>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="card">
                <div class="card-header">
                    Overview
                </div>
                <div class="card-body">
                    <p class="card-text">
                        {{json_metadata['Meta']['themoviedb']['Meta']['overview']}}
                    <p>
                </div>
            </div>
        </div>
        <div class="row">
            {% if data_json_media_chapters %}
            <div class="card">
                <div class="card-header">
                    Chapters
                </div>
                <div class="card-body">
                    <p class="card-text">
                    <div class="grid">
                        {% for chapter_info in data_json_media_chapters %}
                        <div class="col-1-4">
                            <a href="{{ url_for('user_playback.user_video_player_videojs', mtype='hls', guid=data_guid, chapter=chapter_info[0].replace(' ','%20'), audio=0, sub=0) }}">
                                <img class="b-lazy"
                                     src=data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==
                                     data-src="{{ url_for('static', filename='meta/images/' + chapter_info[1] | replace('/mediakraken/web_app/MediaKraken/static/meta/images/', '')) }}"
                                     height="150" width="150">
                            </a>
                        </div>
                        {% endfor %}
                    </div>
                    <p>
                </div>
            </div>
            {% endif %}
        </div>
    </form>
</div>
{% else %}
<p>No info found. ERROR! You should never see this message.</p>
{% endif %}
<script src="{{ url_for('static', filename='bootstrap/js/bootstrap.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/jquery.min.js') }}" type="text/javascript"></script>
<script src="{{ url_for('static', filename='js/star-rating.min.js') }}"
        type="text/javascript"></script>
<script src="{{ url_for('static', filename='bstree/js/jquery.bstree.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/blazy.min.js') }}"></script>
<script>
        ;(function() {
            // Initialize
            var bLazy = new Blazy();
        })();
</script>
</body>
{% endblock %}
