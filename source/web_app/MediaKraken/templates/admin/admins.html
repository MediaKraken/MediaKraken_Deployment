{% extends "layout.html" %}
{% block content %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <title>MediaKraken Admin</title>
    <meta name="generator" content="Bootply"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href="/static/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <!--[if lt IE 9]>
    <script src="/static/js/html5.js"></script>
    <![endif]-->
    <link href="/static/css/style.min.css" rel="stylesheet">
    <link href="/static/font-awesome/css/font-awesome.min.css" rel="stylesheet">
    <link href="/static/css/base_webapp_layout.css" media="all" rel="stylesheet" type="text/css"/>
    <link href="/static/css/base_webapp_flex.css" media="all" rel="stylesheet" type="text/css"/>
</head>
<body id="data_background">
<div class="flexContainer flexItem">
    <aside class="sidebar sidebarLeft">
        {% with data_library=data_library, data_messages=data_messages, data_share=data_share,
        data_user_count=data_user_count %}
        {% include "admin/admin_sidenav.html" %}
        {% endwith %}
    </aside>
    <main class="flexItem main">
        <div class="row">
            <div class="col">
                <div class="card">
                    <div class="card-body">
                        <h4 class="card-title">Server Info</h4>
                    </div>
                    <div class="card-text">
                        <p>
                            <small><b>Server Name:</b> {{ data_server_info_server_name }}
                            </small>
                        </p>
                        <p>
                            <small><b>Uptime:</b> {{ data_server_uptime }}</small>
                        </p>
                        <p>
                            <small><b>Host IP:</b> {{ data_host_ip }}</small>
                        </p>
                        <p>
                            <small>
                                <b>Docker IP Internal:</b>
                                {% for nic_data in data_server_info_server_ip %}
                        <p class="tab">{{ nic_data }}</p>
                        {% endfor %}
                        </small>
                        </p>
                        <p>
                            <small><b>Port:</b> {{ data_server_info_server_port }}</small>
                        </p>
                        <p>
                            <small><b>IP External:</b> {{ data_server_info_server_ip_external }}
                            </small>
                        </p>
                        <p>
                            <small><b>Version:</b> {{ data_server_info_server_version }}</small>
                        </p>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="card">
                    <div class="card-body">
                        <h4 class="card-title">Notices</h4>
                    </div>
                    <div class="card-text">
                        {% if data_alerts_dismissable %}
                        <div class="alert alert-info">
                            {% for row_data in data_alerts_dismissable %}
                            <p>
                                <button type="button" class="close" data-dismiss="alert">Ã—
                                </button>
                                {{ row_data[1] }}
                            </p>
                            {% endfor %}
                        </div>
                        {% endif %}
                        {% if data_alerts %}
                        {% for row_data in data_alerts_dismissable %}
                        <p> {{ row_data[1] }} </p>
                        {% endfor %}
                        {% endif %}
                        {% if not data_alerts_dismissable and not data_alerts %}
                        <p>No alerts.</p>
                        {% endif %}
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="table-responsive">
                    <table class="table table-striped">
                        <thead>
                        <tr>
                            <th>Media Files</th>
                            <th>Matched Media</th>
                            <th>Streamed Media</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td> {{ data_count_media_files }}</td>
                            <td> {{ data_count_matched_media }}</td>
                            <td> {{ data_count_streamed_media }}</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
                <div class="table-responsive">
                    <table class="table table-striped">
                        <thead>
                        <tr>
                            <th>Metadata to Fetch</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td> {{ data_count_meta_fetch }}</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col">
                <div class="card">
                    <div class="card-body">
                        <h4 class="card-title">Active Streams</h4>
                    </div>
                    <div class="card-text">
                        {% if data_active_streams %}
                        {% for row_data in data_active_streams %}
                        <small>{{ row_data[0] }} - {{ row_data[1] }}</small>
                        <div class="progress">
                            <div class="progress-bar progress-bar-info progress-bar-striped active"
                                 role="progressbar" aria-valuenow={{ row_data[2] }}
                                 aria-valuemin="0" aria-valuemax="100" style="width: 20%">
                                <span class="sr-only">{{ row_data[2] }}% Complete</span>
                            </div>
                        </div>
                        {% endfor %}
                        {% else %}
                        <small>No Current Streams</small>
                        {% endif %}
                    </div>
                </div>
            </div>
            <div class="card">
                <div class="card-body">
                    <h4 class="card-title">Scanning Status</h4>
                </div>
                <div class="card-text">
                    {% if data_scan_info %}
                    {% for row_data in data_scan_info %}
                    <small>{{ row_data[0] + ' - ' + row_data[1]}}</small>
                    <div class="progress">
                        <div class="progress-bar progress-bar-info progress-bar-striped active"
                             role="progressbar" aria-valuenow={{ row_data[2] }}
                             aria-valuemin="0" aria-valuemax="100"
                             style="width: {{ row_data[2] }}%">
                            <span class="sr-only">20% Complete</span>
                        </div>
                    </div>
                    {% else %}
                    <p>Not currently scanning.</p>
                    {% endfor %}
                    {% endif %}
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col">
                <div class="card">
                    <div class="card-body">
                        <h4 class="card-title">Status</h4>
                    </div>
                    <div class="card-text">
                        <small>Metadata Match/Fetch</small>
                        <div class="progress">
                            <div class="progress-bar progress-bar-warning"
                                 role="progressbar" aria-valuenow="60" aria-valuemin="0"
                                 aria-valuemax="100" style="width: 60%">
                                <span class="sr-only">60% Complete (warning)</span>
                            </div>
                        </div>
                        <small>Backup Progress</small>
                        <div class="progress">
                            <div class="progress-bar progress-bar-danger" role="progressbar"
                                 aria-valuenow="80" aria-valuemin="0" aria-valuemax="100"
                                 style="width: 80%">
                                <span class="sr-only">80% Complete</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
</div>
<script src="/static/js/jquery.min.js"></script>
<script src="/static/bootstrap/js/bootstrap.min.js"></script>
</body>
</html>
{% endblock %}
