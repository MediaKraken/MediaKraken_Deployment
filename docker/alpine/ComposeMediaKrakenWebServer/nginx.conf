# some performance tweaks used from below link
# https://github.com/lebinh/nginx-conf#performance

worker_processes auto;

server {
    # enable zip compression to browsers
    gzip on;
    gzip_types      text/html text/css application/x-javascript text/plain;
    gzip_proxied    no-cache no-store private expired auth;
    gzip_min_length 500;
    # allow clients that don't have gzip support
    # TODO will need to make sure nginx is compiled with it
    # gunzip on;

    root /mediakraken/web_app;
    listen      8900 ssl;
    server_name localhost;
    charset     utf-8;
    client_max_body_size 75M;
    access_log /var/log/mediakraken/nginx/mediakraken.net_access.log;
    error_log /var/log/mediakraken/nginx/mediakraken.net_error.log;

    location  /static {
      alias  /mediakraken/web_app/MediaKraken/;
    }

    location / {
        include uwsgi_params;
        uwsgi_pass unix:/var/mediakraken_uwsgi.sock;
    }
}
